(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[676],{7560:function(e,r,t){Promise.resolve().then(t.bind(t,1056))},1056:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return u}});var n=t(7437),o=t(2265),a=t(521),i=t(7689),l=t(6362),s=t(2869),c=t(6070),d=t(9016),f=t(9376);function u(){let{addFile:e}=(0,d.U)(),r=(0,f.useRouter)(),[t,u]=(0,o.useState)(!1),m=(0,o.useRef)(null),p=async t=>{if(!t)return;let n=Array.from(t).filter(e=>e.type.startsWith("audio/"));try{for(let r of n){let t={id:crypto.randomUUID(),name:r.name,file:r,tags:[],uploadedAt:new Date};try{await e(t)}catch(e){console.error("Error adding file:",e)}}}catch(e){console.error("Error processing files:",e)}finally{r.push("/")}},g=e=>{e.preventDefault(),e.stopPropagation(),"dragenter"===e.type||"dragover"===e.type?u(!0):"dragleave"===e.type&&u(!1)};return(0,n.jsxs)("div",{className:"container mx-auto p-6 max-w-2xl",children:[(0,n.jsxs)(a.E.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.3},children:[(0,n.jsx)("h1",{className:"font-mono text-4xl font-bold mb-2 lowercase tracking-tight",children:"upload"}),(0,n.jsx)("p",{className:"font-mono text-muted-foreground mb-8 lowercase",children:"upload mp3 or wav files to your stash"})]}),(0,n.jsx)(a.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.1},children:(0,n.jsx)(c.Zb,{onDragEnter:g,onDragLeave:g,onDragOver:g,onDrop:e=>{e.preventDefault(),e.stopPropagation(),u(!1),p(e.dataTransfer.files)},className:"border-dashed transition-all ".concat(t?"border-foreground bg-accent scale-[1.02]":"hover:border-foreground/50"),children:(0,n.jsx)(c.aY,{className:"p-12",children:(0,n.jsxs)("div",{className:"flex flex-col items-center justify-center text-center space-y-4",children:[(0,n.jsx)(a.E.div,{animate:{y:[0,-10,0]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},children:(0,n.jsx)(i.Z,{className:"h-12 w-12 text-muted-foreground"})}),(0,n.jsxs)("div",{children:[(0,n.jsx)(c.ll,{className:"font-mono mb-2 lowercase",children:"drop audio files here"}),(0,n.jsx)(c.SZ,{className:"font-mono lowercase",children:"or click to browse"})]}),(0,n.jsx)("input",{ref:m,type:"file",accept:"audio/mpeg,audio/wav,audio/*",multiple:!0,onChange:e=>p(e.target.files),className:"hidden"}),(0,n.jsx)(s.z,{onClick:()=>{var e;return null===(e=m.current)||void 0===e?void 0:e.click()},className:"font-mono lowercase",children:"select files"}),(0,n.jsxs)("div",{className:"pt-4 border-t border-border w-full",children:[(0,n.jsx)("p",{className:"font-mono text-xs text-muted-foreground mb-2 lowercase",children:"need to detect bpm?"}),(0,n.jsxs)("a",{href:"https://tunebat.com/Analyzer",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 font-mono text-sm text-foreground hover:text-muted-foreground transition-colors lowercase",children:["tunebat bpm detector",(0,n.jsx)(l.Z,{className:"h-3 w-3"})]})]})]})})})})]})}},2869:function(e,r,t){"use strict";t.d(r,{z:function(){return c}});var n=t(7437),o=t(2265),a=t(5293),i=t(535),l=t(4508);let s=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap font-mono text-sm font-medium transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-foreground text-background hover:bg-foreground/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border-2 border-border bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-foreground underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 px-3",lg:"h-11 px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=o.forwardRef((e,r)=>{let{className:t,variant:o,size:i,asChild:c=!1,...d}=e,f=c?a.g7:"button";return(0,n.jsx)(f,{className:(0,l.cn)(s({variant:o,size:i,className:t})),ref:r,...d})});c.displayName="Button"},6070:function(e,r,t){"use strict";t.d(r,{Ol:function(){return l},SZ:function(){return c},Zb:function(){return i},aY:function(){return d},ll:function(){return s}});var n=t(7437),o=t(2265),a=t(4508);let i=o.forwardRef((e,r)=>{let{className:t,...o}=e;return(0,n.jsx)("div",{ref:r,className:(0,a.cn)("border-2 border-border bg-card text-card-foreground",t),...o})});i.displayName="Card";let l=o.forwardRef((e,r)=>{let{className:t,...o}=e;return(0,n.jsx)("div",{ref:r,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",t),...o})});l.displayName="CardHeader";let s=o.forwardRef((e,r)=>{let{className:t,...o}=e;return(0,n.jsx)("h3",{ref:r,className:(0,a.cn)("font-mono text-2xl font-semibold leading-none tracking-tight",t),...o})});s.displayName="CardTitle";let c=o.forwardRef((e,r)=>{let{className:t,...o}=e;return(0,n.jsx)("p",{ref:r,className:(0,a.cn)("font-mono text-sm text-muted-foreground",t),...o})});c.displayName="CardDescription";let d=o.forwardRef((e,r)=>{let{className:t,...o}=e;return(0,n.jsx)("div",{ref:r,className:(0,a.cn)("p-6 pt-0",t),...o})});d.displayName="CardContent",o.forwardRef((e,r)=>{let{className:t,...o}=e;return(0,n.jsx)("div",{ref:r,className:(0,a.cn)("flex items-center p-6 pt-0",t),...o})}).displayName="CardFooter"},5832:function(e,r,t){"use strict";function n(){var e;return(null===(e=window.electronAPI)||void 0===e?void 0:e.isElectron)===!0}async function o(e,r){if(!n()||!window.electronAPI)return!1;try{let t=await r.arrayBuffer(),n=Array.from(new Uint8Array(t));return(await window.electronAPI.saveFile(e,n,r.name)).success}catch(e){return console.error("Error saving file to Electron:",e),!1}}async function a(e,r){if(!n()||!window.electronAPI)return null;try{let t=await window.electronAPI.loadFile(e,r);if(!t.success||!t.buffer)return null;let n=new Uint8Array(t.buffer),o=new Blob([n]);return new File([o],r,{type:"audio/mpeg"})}catch(e){return console.error("Error loading file from Electron:",e),null}}async function i(e,r){if(!n()||!window.electronAPI)return!1;try{return(await window.electronAPI.deleteFile(e,r)).success}catch(e){return console.error("Error deleting file from Electron:",e),!1}}async function l(){if(!n()||!window.electronAPI)return[];try{return(await window.electronAPI.loadMetadata()).files||[]}catch(e){return console.error("Error loading metadata from Electron:",e),[]}}async function s(e){if(!n()||!window.electronAPI)return!1;try{return(await window.electronAPI.saveMetadata(e)).success}catch(e){return console.error("Error saving metadata to Electron:",e),!1}}t.d(r,{LF:function(){return s},LV:function(){return o},QO:function(){return a},b4:function(){return l},d:function(){return n},mb:function(){return i}})},4508:function(e,r,t){"use strict";t.d(r,{cn:function(){return a}});var n=t(1994),o=t(3335);function a(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,o.m6)((0,n.W)(r))}},9016:function(e,r,t){"use strict";t.d(r,{U:function(){return s}});var n=t(9625),o=t(5832);let a="the-stash-audio";async function i(){if((0,o.d)())try{let e=await (0,o.b4)();if(e&&e.length>0)return e.map(e=>({...e,uploadedAt:new Date(e.uploadedAt)}))}catch(e){console.error("Error loading from Electron storage:",e)}try{let e=localStorage.getItem(a);if(!e)return[];return JSON.parse(e).map(e=>({...e,uploadedAt:new Date(e.uploadedAt)}))}catch(e){return[]}}async function l(e){let r=e.map(e=>({id:e.id,name:e.name,key:e.key,bpm:e.bpm,tags:e.tags,uploadedAt:e.uploadedAt.toISOString()}));if((0,o.d)())try{await (0,o.LF)({files:r})}catch(e){console.error("Error saving to Electron storage:",e)}try{localStorage.setItem(a,JSON.stringify(r))}catch(e){}}let s=(0,n.Ue)((e,r)=>{let t=new Map;return{files:[],fileCache:t,hydrated:!1,hydrate:async()=>{if(r().hydrated)return;let n=await i();if(n.length>0){if((0,o.d)()){let r=[];for(let e of n)try{let n=await (0,o.QO)(e.id,e.name);n?(t.set(e.id,n),r.push({...e,file:n})):r.push({...e,file:e.name})}catch(t){console.error("Error loading file ".concat(e.id,":"),t),r.push({...e,file:e.name})}e({files:r,hydrated:!0})}else e({files:n.map(e=>({...e,file:e.name})),hydrated:!0})}else e({hydrated:!0})},addFile:async r=>{if(r.file instanceof File&&(0,o.d)())try{await (0,o.LV)(r.id,r.file),t.set(r.id,r.file)}catch(e){console.error("Error saving file to Electron:",e),t.set(r.id,r.file)}else r.file instanceof File&&t.set(r.id,r.file);e(e=>{let t=[...e.files,{...r,file:r.name}];return l(t),{files:t}})},updateFile:async(r,t)=>{e(e=>{let n=e.files.map(e=>e.id===r?{...e,...t}:e);return l(n),{files:n}})},deleteFile:async n=>{let a=r().files.find(e=>e.id===n);if(a&&(0,o.d)())try{await (0,o.mb)(a.id,a.name)}catch(e){console.error("Error deleting file from Electron:",e)}t.delete(n),e(e=>{let r=e.files.filter(e=>e.id!==n);return l(r),{files:r}})},filteredFiles:e=>{let{files:t}=r();return t.filter(r=>(!e.key||r.key===e.key)&&(!e.bpm||r.bpm===e.bpm)&&(!e.minBpm||!r.bpm||!(r.bpm<e.minBpm))&&(!e.maxBpm||!r.bpm||!(r.bpm>e.maxBpm)))},getFile:async e=>{let n=t.get(e);if(n)return n;if((0,o.d)()){let n=r().files.find(r=>r.id===e);if(n)try{let r=await (0,o.QO)(n.id,n.name);if(r)return t.set(e,r),r}catch(e){console.error("Error loading file from Electron:",e)}}return null}}})}},function(e){e.O(0,[824,530,971,117,744],function(){return e(e.s=7560)}),_N_E=e.O()}]);