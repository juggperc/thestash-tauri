(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[938],{7354:function(e,r,t){Promise.resolve().then(t.bind(t,1856))},1856:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return f}});var n=t(7437),a=t(2265),o=t(521),i=t(9016),l=t(6070),s=t(2869),c=t(8930),d=t(5832);function f(){let{files:e,deleteFile:r,hydrate:t}=(0,i.U)();(0,a.useEffect)(()=>{t()},[t]);let f=async()=>{if(confirm("are you sure you want to delete all tracks? this cannot be undone."))for(let t of e)await r(t.id)};return(0,n.jsxs)("div",{className:"container mx-auto p-6 max-w-2xl space-y-6",children:[(0,n.jsxs)(o.E.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.3},children:[(0,n.jsx)("h1",{className:"font-mono text-4xl font-bold mb-2 lowercase tracking-tight",children:"settings"}),(0,n.jsx)("p",{className:"font-mono text-muted-foreground lowercase",children:"manage your stash preferences"})]}),(0,n.jsx)(o.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.1},children:(0,n.jsxs)(l.Zb,{children:[(0,n.jsxs)(l.Ol,{children:[(0,n.jsx)(l.ll,{className:"font-mono lowercase",children:"storage"}),(0,n.jsxs)(l.SZ,{className:"font-mono lowercase",children:[e.length," ",1===e.length?"track":"tracks"," stored"]})]}),(0,n.jsxs)(l.aY,{className:"space-y-4",children:[(0,n.jsx)("div",{className:"space-y-2",children:(0,n.jsx)("p",{className:"font-mono text-sm text-muted-foreground lowercase",children:(0,d.d)()?"all data is stored locally on your computer. files are saved to disk and persist between sessions.":"all data is stored locally in your browser. clearing your browser data will remove all tracks."})}),(0,n.jsxs)(s.z,{variant:"destructive",onClick:f,className:"font-mono lowercase",disabled:0===e.length,children:[(0,n.jsx)(c.Z,{className:"mr-2 h-4 w-4"}),"clear all tracks"]})]})]})}),(0,n.jsx)(o.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.2},children:(0,n.jsxs)(l.Zb,{children:[(0,n.jsx)(l.Ol,{children:(0,n.jsx)(l.ll,{className:"font-mono lowercase",children:"about"})}),(0,n.jsx)(l.aY,{children:(0,n.jsx)("p",{className:"font-mono text-sm text-muted-foreground lowercase",children:"the stash â€” mp3/wav storage and management"})})]})})]})}},2869:function(e,r,t){"use strict";t.d(r,{z:function(){return c}});var n=t(7437),a=t(2265),o=t(5293),i=t(535),l=t(4508);let s=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap font-mono text-sm font-medium transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-foreground text-background hover:bg-foreground/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border-2 border-border bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-foreground underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 px-3",lg:"h-11 px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=a.forwardRef((e,r)=>{let{className:t,variant:a,size:i,asChild:c=!1,...d}=e,f=c?o.g7:"button";return(0,n.jsx)(f,{className:(0,l.cn)(s({variant:a,size:i,className:t})),ref:r,...d})});c.displayName="Button"},6070:function(e,r,t){"use strict";t.d(r,{Ol:function(){return l},SZ:function(){return c},Zb:function(){return i},aY:function(){return d},ll:function(){return s}});var n=t(7437),a=t(2265),o=t(4508);let i=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,n.jsx)("div",{ref:r,className:(0,o.cn)("border-2 border-border bg-card text-card-foreground",t),...a})});i.displayName="Card";let l=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,n.jsx)("div",{ref:r,className:(0,o.cn)("flex flex-col space-y-1.5 p-6",t),...a})});l.displayName="CardHeader";let s=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,n.jsx)("h3",{ref:r,className:(0,o.cn)("font-mono text-2xl font-semibold leading-none tracking-tight",t),...a})});s.displayName="CardTitle";let c=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,n.jsx)("p",{ref:r,className:(0,o.cn)("font-mono text-sm text-muted-foreground",t),...a})});c.displayName="CardDescription";let d=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,n.jsx)("div",{ref:r,className:(0,o.cn)("p-6 pt-0",t),...a})});d.displayName="CardContent",a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,n.jsx)("div",{ref:r,className:(0,o.cn)("flex items-center p-6 pt-0",t),...a})}).displayName="CardFooter"},5832:function(e,r,t){"use strict";function n(){var e;return(null===(e=window.electronAPI)||void 0===e?void 0:e.isElectron)===!0}async function a(e,r){if(!n()||!window.electronAPI)return!1;try{let t=await r.arrayBuffer(),n=Array.from(new Uint8Array(t));return(await window.electronAPI.saveFile(e,n,r.name)).success}catch(e){return console.error("Error saving file to Electron:",e),!1}}async function o(e,r){if(!n()||!window.electronAPI)return null;try{let t=await window.electronAPI.loadFile(e,r);if(!t.success||!t.buffer)return null;let n=new Uint8Array(t.buffer),a=new Blob([n]);return new File([a],r,{type:"audio/mpeg"})}catch(e){return console.error("Error loading file from Electron:",e),null}}async function i(e,r){if(!n()||!window.electronAPI)return!1;try{return(await window.electronAPI.deleteFile(e,r)).success}catch(e){return console.error("Error deleting file from Electron:",e),!1}}async function l(){if(!n()||!window.electronAPI)return[];try{return(await window.electronAPI.loadMetadata()).files||[]}catch(e){return console.error("Error loading metadata from Electron:",e),[]}}async function s(e){if(!n()||!window.electronAPI)return!1;try{return(await window.electronAPI.saveMetadata(e)).success}catch(e){return console.error("Error saving metadata to Electron:",e),!1}}t.d(r,{LF:function(){return s},LV:function(){return a},QO:function(){return o},b4:function(){return l},d:function(){return n},mb:function(){return i}})},4508:function(e,r,t){"use strict";t.d(r,{cn:function(){return o}});var n=t(1994),a=t(3335);function o(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,a.m6)((0,n.W)(r))}},9016:function(e,r,t){"use strict";t.d(r,{U:function(){return s}});var n=t(9625),a=t(5832);let o="the-stash-audio";async function i(){if((0,a.d)())try{let e=await (0,a.b4)();if(e&&e.length>0)return e.map(e=>({...e,uploadedAt:new Date(e.uploadedAt)}))}catch(e){console.error("Error loading from Electron storage:",e)}try{let e=localStorage.getItem(o);if(!e)return[];return JSON.parse(e).map(e=>({...e,uploadedAt:new Date(e.uploadedAt)}))}catch(e){return[]}}async function l(e){let r=e.map(e=>({id:e.id,name:e.name,key:e.key,bpm:e.bpm,tags:e.tags,uploadedAt:e.uploadedAt.toISOString()}));if((0,a.d)())try{await (0,a.LF)({files:r})}catch(e){console.error("Error saving to Electron storage:",e)}try{localStorage.setItem(o,JSON.stringify(r))}catch(e){}}let s=(0,n.Ue)((e,r)=>{let t=new Map;return{files:[],fileCache:t,hydrated:!1,hydrate:async()=>{if(r().hydrated)return;let n=await i();if(n.length>0){if((0,a.d)()){let r=[];for(let e of n)try{let n=await (0,a.QO)(e.id,e.name);n?(t.set(e.id,n),r.push({...e,file:n})):r.push({...e,file:e.name})}catch(t){console.error("Error loading file ".concat(e.id,":"),t),r.push({...e,file:e.name})}e({files:r,hydrated:!0})}else e({files:n.map(e=>({...e,file:e.name})),hydrated:!0})}else e({hydrated:!0})},addFile:async r=>{if(r.file instanceof File&&(0,a.d)())try{await (0,a.LV)(r.id,r.file),t.set(r.id,r.file)}catch(e){console.error("Error saving file to Electron:",e),t.set(r.id,r.file)}else r.file instanceof File&&t.set(r.id,r.file);e(e=>{let t=[...e.files,{...r,file:r.name}];return l(t),{files:t}})},updateFile:async(r,t)=>{e(e=>{let n=e.files.map(e=>e.id===r?{...e,...t}:e);return l(n),{files:n}})},deleteFile:async n=>{let o=r().files.find(e=>e.id===n);if(o&&(0,a.d)())try{await (0,a.mb)(o.id,o.name)}catch(e){console.error("Error deleting file from Electron:",e)}t.delete(n),e(e=>{let r=e.files.filter(e=>e.id!==n);return l(r),{files:r}})},filteredFiles:e=>{let{files:t}=r();return t.filter(r=>(!e.key||r.key===e.key)&&(!e.bpm||r.bpm===e.bpm)&&(!e.minBpm||!r.bpm||!(r.bpm<e.minBpm))&&(!e.maxBpm||!r.bpm||!(r.bpm>e.maxBpm)))},getFile:async e=>{let n=t.get(e);if(n)return n;if((0,a.d)()){let n=r().files.find(r=>r.id===e);if(n)try{let r=await (0,a.QO)(n.id,n.name);if(r)return t.set(e,r),r}catch(e){console.error("Error loading file from Electron:",e)}}return null}}})}},function(e){e.O(0,[824,78,971,117,744],function(){return e(e.s=7354)}),_N_E=e.O()}]);