(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[904],{7756:function(e,t,r){Promise.resolve().then(r.bind(r,3449))},3449:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return l}});var n=r(7437),a=r(2265),i=r(521),o=r(9016),s=r(6070);function l(){let{files:e,hydrate:t}=(0,o.U)();(0,a.useEffect)(()=>{t()},[t]);let r=(0,a.useMemo)(()=>{let t={},r={},n={min:1/0,max:-1/0,avg:0},a=0,i=0;return e.forEach(e=>{e.tags.forEach(e=>{t[e]=(t[e]||0)+1}),e.key&&(r[e.key]=(r[e.key]||0)+1),e.bpm&&(a++,i+=e.bpm,n.min=Math.min(n.min,e.bpm),n.max=Math.max(n.max,e.bpm))}),n.avg=a>0?Math.round(i/a):0,{tags:t,keys:r,bpm:n}},[e]);return(0,n.jsxs)("div",{className:"container mx-auto p-6 space-y-6",children:[(0,n.jsxs)(i.E.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.3},children:[(0,n.jsx)("h1",{className:"font-mono text-4xl font-bold mb-2 lowercase tracking-tight",children:"tags & stats"}),(0,n.jsx)("p",{className:"font-mono text-muted-foreground lowercase",children:"overview of your music collection"})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,n.jsx)(i.E.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3,delay:.1},children:(0,n.jsxs)(s.Zb,{children:[(0,n.jsx)(s.Ol,{children:(0,n.jsx)(s.ll,{className:"font-mono lowercase",children:"bpm statistics"})}),(0,n.jsxs)(s.aY,{className:"space-y-2 font-mono",children:[(0,n.jsxs)("div",{className:"flex justify-between border-b-2 border-border pb-2",children:[(0,n.jsx)("span",{className:"text-muted-foreground lowercase",children:"average:"}),(0,n.jsx)("span",{className:"font-bold",children:r.bpm.avg||"n/a"})]}),(0,n.jsxs)("div",{className:"flex justify-between border-b-2 border-border pb-2",children:[(0,n.jsx)("span",{className:"text-muted-foreground lowercase",children:"min:"}),(0,n.jsx)("span",{className:"font-bold",children:r.bpm.min===1/0?"n/a":r.bpm.min})]}),(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("span",{className:"text-muted-foreground lowercase",children:"max:"}),(0,n.jsx)("span",{className:"font-bold",children:r.bpm.max===-1/0?"n/a":r.bpm.max})]})]})]})}),(0,n.jsx)(i.E.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3,delay:.2},children:(0,n.jsxs)(s.Zb,{children:[(0,n.jsx)(s.Ol,{children:(0,n.jsx)(s.ll,{className:"font-mono lowercase",children:"keys"})}),(0,n.jsx)(s.aY,{children:Object.keys(r.keys).length>0?(0,n.jsx)("div",{className:"flex flex-wrap gap-2",children:Object.entries(r.keys).sort((e,t)=>{let[,r]=e,[,n]=t;return n-r}).map(e=>{let[t,r]=e;return(0,n.jsxs)(i.E.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},whileHover:{scale:1.05},className:"border-2 border-border px-3 py-1 font-mono text-sm lowercase hover:bg-foreground hover:text-background transition-colors",children:[t," (",r,")"]},t)})}):(0,n.jsx)("p",{className:"font-mono text-muted-foreground lowercase",children:"no keys tagged"})})]})}),(0,n.jsx)(i.E.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3,delay:.3},children:(0,n.jsxs)(s.Zb,{children:[(0,n.jsx)(s.Ol,{children:(0,n.jsx)(s.ll,{className:"font-mono lowercase",children:"all tags"})}),(0,n.jsx)(s.aY,{children:Object.keys(r.tags).length>0?(0,n.jsx)("div",{className:"flex flex-wrap gap-2",children:Object.entries(r.tags).sort((e,t)=>{let[,r]=e,[,n]=t;return n-r}).map(e=>{let[t,r]=e;return(0,n.jsxs)(i.E.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},whileHover:{scale:1.05},className:"border-2 border-border px-3 py-1 font-mono text-sm lowercase hover:bg-foreground hover:text-background transition-colors",children:[t," (",r,")"]},t)})}):(0,n.jsx)("p",{className:"font-mono text-muted-foreground lowercase",children:"no tags"})})]})})]})]})}},6070:function(e,t,r){"use strict";r.d(t,{Ol:function(){return s},SZ:function(){return c},Zb:function(){return o},aY:function(){return u},ll:function(){return l}});var n=r(7437),a=r(2265),i=r(4508);let o=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,i.cn)("border-2 border-border bg-card text-card-foreground",r),...a})});o.displayName="Card";let s=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",r),...a})});s.displayName="CardHeader";let l=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("h3",{ref:t,className:(0,i.cn)("font-mono text-2xl font-semibold leading-none tracking-tight",r),...a})});l.displayName="CardTitle";let c=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("p",{ref:t,className:(0,i.cn)("font-mono text-sm text-muted-foreground",r),...a})});c.displayName="CardDescription";let u=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,i.cn)("p-6 pt-0",r),...a})});u.displayName="CardContent",a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,i.cn)("flex items-center p-6 pt-0",r),...a})}).displayName="CardFooter"},5832:function(e,t,r){"use strict";function n(){var e;return(null===(e=window.electronAPI)||void 0===e?void 0:e.isElectron)===!0}async function a(e,t){if(!n()||!window.electronAPI)return!1;try{let r=await t.arrayBuffer(),n=Array.from(new Uint8Array(r));return(await window.electronAPI.saveFile(e,n,t.name)).success}catch(e){return console.error("Error saving file to Electron:",e),!1}}async function i(e,t){if(!n()||!window.electronAPI)return null;try{let r=await window.electronAPI.loadFile(e,t);if(!r.success||!r.buffer)return null;let n=new Uint8Array(r.buffer),a=new Blob([n]);return new File([a],t,{type:"audio/mpeg"})}catch(e){return console.error("Error loading file from Electron:",e),null}}async function o(e,t){if(!n()||!window.electronAPI)return!1;try{return(await window.electronAPI.deleteFile(e,t)).success}catch(e){return console.error("Error deleting file from Electron:",e),!1}}async function s(){if(!n()||!window.electronAPI)return[];try{return(await window.electronAPI.loadMetadata()).files||[]}catch(e){return console.error("Error loading metadata from Electron:",e),[]}}async function l(e){if(!n()||!window.electronAPI)return!1;try{return(await window.electronAPI.saveMetadata(e)).success}catch(e){return console.error("Error saving metadata to Electron:",e),!1}}r.d(t,{LF:function(){return l},LV:function(){return a},QO:function(){return i},b4:function(){return s},d:function(){return n},mb:function(){return o}})},4508:function(e,t,r){"use strict";r.d(t,{cn:function(){return i}});var n=r(1994),a=r(3335);function i(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.m6)((0,n.W)(t))}},4369:function(e,t,r){"use strict";var n=r(2265),a="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},i=n.useState,o=n.useEffect,s=n.useLayoutEffect,l=n.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!a(e,r)}catch(e){return!0}}var u="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var r=t(),n=i({inst:{value:r,getSnapshot:t}}),a=n[0].inst,u=n[1];return s(function(){a.value=r,a.getSnapshot=t,c(a)&&u({inst:a})},[e,r,t]),o(function(){return c(a)&&u({inst:a}),e(function(){c(a)&&u({inst:a})})},[e]),l(r),r};t.useSyncExternalStore=void 0!==n.useSyncExternalStore?n.useSyncExternalStore:u},2860:function(e,t,r){"use strict";var n=r(2265),a=r(2558),i="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},o=a.useSyncExternalStore,s=n.useRef,l=n.useEffect,c=n.useMemo,u=n.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,r,n,a){var d=s(null);if(null===d.current){var f={hasValue:!1,value:null};d.current=f}else f=d.current;var m=o(e,(d=c(function(){function e(e){if(!l){if(l=!0,o=e,e=n(e),void 0!==a&&f.hasValue){var t=f.value;if(a(t,e))return s=t}return s=e}if(t=s,i(o,e))return t;var r=n(e);return void 0!==a&&a(t,r)?(o=e,t):(o=e,s=r)}var o,s,l=!1,c=void 0===r?null:r;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]},[t,r,n,a]))[0],d[1]);return l(function(){f.hasValue=!0,f.value=m},[m]),u(m),m}},2558:function(e,t,r){"use strict";e.exports=r(4369)},5195:function(e,t,r){"use strict";e.exports=r(2860)},9016:function(e,t,r){"use strict";r.d(t,{U:function(){return l}});var n=r(9625),a=r(5832);let i="the-stash-audio";async function o(){if((0,a.d)())try{let e=await (0,a.b4)();if(e&&e.length>0)return e.map(e=>({...e,uploadedAt:new Date(e.uploadedAt)}))}catch(e){console.error("Error loading from Electron storage:",e)}try{let e=localStorage.getItem(i);if(!e)return[];return JSON.parse(e).map(e=>({...e,uploadedAt:new Date(e.uploadedAt)}))}catch(e){return[]}}async function s(e){let t=e.map(e=>({id:e.id,name:e.name,key:e.key,bpm:e.bpm,tags:e.tags,uploadedAt:e.uploadedAt.toISOString()}));if((0,a.d)())try{await (0,a.LF)({files:t})}catch(e){console.error("Error saving to Electron storage:",e)}try{localStorage.setItem(i,JSON.stringify(t))}catch(e){}}let l=(0,n.Ue)((e,t)=>{let r=new Map;return{files:[],fileCache:r,hydrated:!1,hydrate:async()=>{if(t().hydrated)return;let n=await o();if(n.length>0){if((0,a.d)()){let t=[];for(let e of n)try{let n=await (0,a.QO)(e.id,e.name);n?(r.set(e.id,n),t.push({...e,file:n})):t.push({...e,file:e.name})}catch(r){console.error("Error loading file ".concat(e.id,":"),r),t.push({...e,file:e.name})}e({files:t,hydrated:!0})}else e({files:n.map(e=>({...e,file:e.name})),hydrated:!0})}else e({hydrated:!0})},addFile:async t=>{if(t.file instanceof File&&(0,a.d)())try{await (0,a.LV)(t.id,t.file),r.set(t.id,t.file)}catch(e){console.error("Error saving file to Electron:",e),r.set(t.id,t.file)}else t.file instanceof File&&r.set(t.id,t.file);e(e=>{let r=[...e.files,{...t,file:t.name}];return s(r),{files:r}})},updateFile:async(t,r)=>{e(e=>{let n=e.files.map(e=>e.id===t?{...e,...r}:e);return s(n),{files:n}})},deleteFile:async n=>{let i=t().files.find(e=>e.id===n);if(i&&(0,a.d)())try{await (0,a.mb)(i.id,i.name)}catch(e){console.error("Error deleting file from Electron:",e)}r.delete(n),e(e=>{let t=e.files.filter(e=>e.id!==n);return s(t),{files:t}})},filteredFiles:e=>{let{files:r}=t();return r.filter(t=>(!e.key||t.key===e.key)&&(!e.bpm||t.bpm===e.bpm)&&(!e.minBpm||!t.bpm||!(t.bpm<e.minBpm))&&(!e.maxBpm||!t.bpm||!(t.bpm>e.maxBpm)))},getFile:async e=>{let n=r.get(e);if(n)return n;if((0,a.d)()){let n=t().files.find(t=>t.id===e);if(n)try{let t=await (0,a.QO)(n.id,n.name);if(t)return r.set(e,t),t}catch(e){console.error("Error loading file from Electron:",e)}}return null}}})},9625:function(e,t,r){"use strict";r.d(t,{Ue:function(){return f}});let n=e=>{let t;let r=new Set,n=(e,n)=>{let a="function"==typeof e?e(t):e;if(!Object.is(a,t)){let e=t;t=(null!=n?n:"object"!=typeof a||null===a)?a:Object.assign({},t,a),r.forEach(r=>r(t,e))}},a=()=>t,i={setState:n,getState:a,getInitialState:()=>o,subscribe:e=>(r.add(e),()=>r.delete(e)),destroy:()=>{console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}},o=t=e(n,a,i);return i},a=e=>e?n(e):n;var i=r(2265),o=r(5195);let{useDebugValue:s}=i,{useSyncExternalStoreWithSelector:l}=o,c=!1,u=e=>e,d=e=>{"function"!=typeof e&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");let t="function"==typeof e?a(e):e,r=(e,r)=>(function(e,t=u,r){r&&!c&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),c=!0);let n=l(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,r);return s(n),n})(t,e,r);return Object.assign(r,t),r},f=e=>e?d(e):d}},function(e){e.O(0,[824,971,117,744],function(){return e(e.s=7756)}),_N_E=e.O()}]);