(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{7601:function(e,t,n){Promise.resolve().then(n.bind(n,759))},759:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return S}});var r=n(7437),a=n(2265),i=n(521),s=n(9016),l=n(6070),o=n(4508);let c=a.forwardRef((e,t)=>{let{className:n,type:a,...i}=e;return(0,r.jsx)("input",{type:a,className:(0,o.cn)("flex h-10 w-full border-2 border-border bg-background px-3 py-2 font-mono text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",n),ref:t,...i})});c.displayName="Input";let d=a.forwardRef((e,t)=>{let{className:n,children:a,...i}=e;return(0,r.jsx)("select",{className:(0,o.cn)("flex h-10 w-full border-2 border-border bg-background px-3 py-2 font-mono text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",n),ref:t,...i,children:a})});d.displayName="Select";var u=n(2869),f=n(9205);let m=(0,f.Z)("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]),p=(0,f.Z)("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);var x=n(8930),h=n(8614);let y=(0,f.Z)("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);var v=n(2489);let g=(0,f.Z)("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);function b(e){let{file:t,onClose:n}=e,[o,c]=(0,a.useState)(!1),[d,f]=(0,a.useState)(0),[p,x]=(0,a.useState)(0),[b,w]=(0,a.useState)(""),[j,N]=(0,a.useState)({x:100,y:100}),[E,k]=(0,a.useState)(!1),[S,C]=(0,a.useState)({x:0,y:0}),L=(0,a.useRef)(null),A=(0,a.useRef)(null),z=(0,a.useRef)(null),{getFile:I}=(0,s.U)();(0,a.useEffect)(()=>{let e=null;return(async()=>{let n=await I(t.id);n?w(e=URL.createObjectURL(n)):"string"==typeof t.file&&w(t.file)})(),()=>{e&&URL.revokeObjectURL(e)}},[t,I]),(0,a.useEffect)(()=>{let e=L.current;if(!e||!b)return;f(0),x(0),c(!1);let t=()=>{void 0===e.currentTime||isNaN(e.currentTime)||f(e.currentTime)},n=()=>{void 0===e.duration||isNaN(e.duration)||x(e.duration)},r=()=>{c(!1),f(0)},a=()=>{n()},i=()=>{n()};return e.addEventListener("timeupdate",t),e.addEventListener("loadedmetadata",a),e.addEventListener("canplay",i),e.addEventListener("durationchange",n),e.addEventListener("ended",r),e.readyState>=1&&n(),()=>{e.removeEventListener("timeupdate",t),e.removeEventListener("loadedmetadata",a),e.removeEventListener("canplay",i),e.removeEventListener("durationchange",n),e.removeEventListener("ended",r)}},[b]),(0,a.useEffect)(()=>{N({x:(window.innerWidth-320)/2,y:(window.innerHeight-120)/2})},[]),(0,a.useEffect)(()=>{if(!E)return;let e=e=>{let t=e.clientX-S.x,n=e.clientY-S.y;N({x:t=Math.max(0,Math.min(t,window.innerWidth-320)),y:n=Math.max(0,Math.min(n,window.innerHeight-140))})},t=()=>{k(!1)};return window.addEventListener("mousemove",e),window.addEventListener("mouseup",t),()=>{window.removeEventListener("mousemove",e),window.removeEventListener("mouseup",t)}},[E,S]),(0,a.useEffect)(()=>{let e=L.current;if(!e)return;let t=()=>c(!0),n=()=>c(!1);return e.addEventListener("play",t),e.addEventListener("pause",n),c(!e.paused),()=>{e.removeEventListener("play",t),e.removeEventListener("pause",n)}},[b]);let R=e=>"".concat(Math.floor(e/60),":").concat(Math.floor(e%60).toString().padStart(2,"0"));return(0,r.jsx)(h.M,{children:(0,r.jsx)(i.E.div,{ref:A,initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"fixed z-50 w-80",style:{left:"".concat(j.x,"px"),top:"".concat(j.y,"px"),cursor:E?"grabbing":"default"},children:(0,r.jsxs)(l.Zb,{className:"border-2 border-border shadow-lg select-none",children:[(0,r.jsx)(l.Ol,{ref:z,onMouseDown:e=>{if(!A.current)return;let t=A.current.getBoundingClientRect();C({x:e.clientX-t.left,y:e.clientY-t.top}),k(!0)},className:"cursor-grab active:cursor-grabbing border-b-2 border-border pb-2 select-none",children:(0,r.jsxs)("div",{className:"flex items-center justify-between select-none",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 flex-1 min-w-0 select-none",children:[(0,r.jsx)(y,{className:"h-4 w-4 text-muted-foreground shrink-0"}),(0,r.jsx)(l.ll,{className:"font-mono text-sm font-medium truncate lowercase select-none",children:t.name})]}),(0,r.jsx)(u.z,{size:"icon",variant:"ghost",onClick:n,className:"shrink-0 h-6 w-6",children:(0,r.jsx)(v.Z,{className:"h-3 w-3"})})]})}),(0,r.jsxs)(l.aY,{className:"p-4 select-none",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 select-none",children:[(0,r.jsx)(u.z,{size:"icon",onClick:()=>{let e=L.current;e&&(e.paused?e.play().then(()=>{c(!0)}).catch(e=>{console.error("Error playing audio:",e)}):(e.pause(),c(!1)))},className:"shrink-0",children:o?(0,r.jsx)(g,{className:"h-4 w-4"}):(0,r.jsx)(m,{className:"h-4 w-4"})}),(0,r.jsx)("div",{className:"flex-1 min-w-0 select-none",children:(0,r.jsxs)("div",{className:"flex items-center gap-2 select-none",children:[(0,r.jsx)("input",{type:"range",min:"0",max:p||0,value:d,onChange:e=>{let t=L.current;if(!t)return;let n=parseFloat(e.target.value);t.currentTime=n,f(n)},className:"flex-1 h-1 bg-secondary accent-foreground cursor-pointer"}),(0,r.jsxs)("span",{className:"font-mono text-xs text-muted-foreground whitespace-nowrap shrink-0 select-none",children:[R(d)," / ",R(p)]})]})})]}),b&&(0,r.jsx)("audio",{ref:L,src:b,preload:"metadata"})]})]})})})}var w=n(6362);let j=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)("label",{ref:t,className:(0,o.cn)("font-mono text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",n),...a})});j.displayName="Label";let N=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];function E(e){var t;let{file:n,onClose:o}=e,{updateFile:f}=(0,s.U)(),[m,p]=(0,a.useState)(n.key||""),[x,y]=(0,a.useState)((null===(t=n.bpm)||void 0===t?void 0:t.toString())||""),[g,b]=(0,a.useState)(n.tags.join(", ")),E=async()=>{await f(n.id,{key:m||void 0,bpm:x?parseInt(x):void 0,tags:g.split(",").map(e=>e.trim()).filter(Boolean)}),o()};return(0,r.jsx)(h.M,{children:(0,r.jsx)(i.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",onClick:o,children:(0,r.jsx)(i.E.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},onClick:e=>e.stopPropagation(),children:(0,r.jsxs)(l.Zb,{className:"w-full max-w-md",children:[(0,r.jsx)(l.Ol,{children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)(l.ll,{className:"font-mono lowercase",children:"edit track"}),(0,r.jsx)(u.z,{size:"icon",variant:"ghost",onClick:o,children:(0,r.jsx)(v.Z,{className:"h-4 w-4"})})]})}),(0,r.jsxs)(l.aY,{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(j,{className:"font-mono lowercase",children:"key"}),(0,r.jsxs)(d,{value:m,onChange:e=>p(e.target.value),children:[(0,r.jsx)("option",{value:"",children:"none"}),N.map(e=>(0,r.jsx)("option",{value:e,children:e},e))]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)(j,{className:"font-mono lowercase",children:"bpm"}),(0,r.jsxs)("a",{href:"https://tunebat.com/Analyzer",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 font-mono text-xs text-muted-foreground hover:text-foreground transition-colors lowercase",children:["detect bpm",(0,r.jsx)(w.Z,{className:"h-3 w-3"})]})]}),(0,r.jsx)(c,{type:"number",placeholder:"bpm",value:x,onChange:e=>y(e.target.value)})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(j,{className:"font-mono lowercase",children:"tags (comma-separated)"}),(0,r.jsx)(c,{placeholder:"tag1, tag2, tag3",value:g,onChange:e=>b(e.target.value)})]}),(0,r.jsxs)("div",{className:"flex gap-2 pt-4",children:[(0,r.jsx)(u.z,{variant:"outline",onClick:o,className:"flex-1 font-mono lowercase",children:"cancel"}),(0,r.jsx)(u.z,{onClick:E,className:"flex-1 font-mono lowercase",children:"save"})]})]})]})})})})}let k=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];function S(){let{files:e,deleteFile:t,filteredFiles:n,hydrate:o}=(0,s.U)(),[f,h]=(0,a.useState)(""),[y,v]=(0,a.useState)(""),[g,w]=(0,a.useState)(""),[j,N]=(0,a.useState)(""),[S,C]=(0,a.useState)(null),[L,A]=(0,a.useState)(null);(0,a.useEffect)(()=>{o()},[o]);let z=(0,a.useMemo)(()=>n({key:f||void 0,bpm:y?parseInt(y):void 0,minBpm:g?parseInt(g):void 0,maxBpm:j?parseInt(j):void 0}),[f,y,g,j,n]);return(0,r.jsxs)("div",{className:"container mx-auto p-6 space-y-6",children:[(0,r.jsxs)(i.E.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.3},children:[(0,r.jsx)("h1",{className:"font-mono text-4xl font-bold mb-2 lowercase tracking-tight",children:"library"}),(0,r.jsxs)("p",{className:"font-mono text-muted-foreground lowercase",children:[z.length," ",1===z.length?"track":"tracks"]})]}),(0,r.jsxs)(i.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.1},className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"font-mono text-sm font-medium lowercase",children:"filter by key"}),(0,r.jsxs)(d,{value:f,onChange:e=>h(e.target.value),children:[(0,r.jsx)("option",{value:"",children:"all keys"}),k.map(e=>(0,r.jsx)("option",{value:e,children:e},e))]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"font-mono text-sm font-medium lowercase",children:"exact bpm"}),(0,r.jsx)(c,{type:"number",placeholder:"bpm",value:y,onChange:e=>v(e.target.value)})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"font-mono text-sm font-medium lowercase",children:"min bpm"}),(0,r.jsx)(c,{type:"number",placeholder:"min",value:g,onChange:e=>w(e.target.value)})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"font-mono text-sm font-medium lowercase",children:"max bpm"}),(0,r.jsx)(c,{type:"number",placeholder:"max",value:j,onChange:e=>N(e.target.value)})]})]}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:z.map((e,n)=>(0,r.jsx)(i.E.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.2,delay:.05*n},whileHover:{y:-4},children:(0,r.jsxs)(l.Zb,{className:"h-full flex flex-col hover:border-foreground transition-colors",children:[(0,r.jsxs)(l.Ol,{children:[(0,r.jsx)(l.ll,{className:"font-mono text-lg truncate lowercase",children:e.name}),(0,r.jsxs)(l.SZ,{className:"font-mono lowercase",children:[e.key&&"key: ".concat(e.key),e.key&&e.bpm&&" â€¢ ",e.bpm&&"bpm: ".concat(e.bpm)]})]}),(0,r.jsxs)(l.aY,{className:"flex-1 flex flex-col justify-between",children:[(0,r.jsx)("div",{className:"space-y-2",children:e.tags.length>0&&(0,r.jsx)("div",{className:"flex flex-wrap gap-1",children:e.tags.map(e=>(0,r.jsx)("span",{className:"font-mono text-xs border-2 border-border px-2 py-1 lowercase hover:bg-foreground hover:text-background transition-colors",children:e},e))})}),(0,r.jsxs)("div",{className:"flex gap-2 mt-4",children:[(0,r.jsx)(u.z,{size:"icon",variant:"outline",onClick:()=>C(e.id),className:"flex-1",children:(0,r.jsx)(m,{className:"h-4 w-4"})}),(0,r.jsx)(u.z,{size:"icon",variant:"outline",onClick:()=>A(e.id),children:(0,r.jsx)(p,{className:"h-4 w-4"})}),(0,r.jsx)(u.z,{size:"icon",variant:"outline",onClick:()=>t(e.id),children:(0,r.jsx)(x.Z,{className:"h-4 w-4"})})]})]})]})},e.id))}),0===z.length&&(0,r.jsx)(i.E.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-12",children:(0,r.jsx)("p",{className:"font-mono text-muted-foreground lowercase",children:"no tracks found. upload some audio files to get started."})}),S&&(0,r.jsx)(b,{file:z.find(e=>e.id===S),onClose:()=>C(null)}),L&&(0,r.jsx)(E,{file:z.find(e=>e.id===L),onClose:()=>A(null)})]})}},2869:function(e,t,n){"use strict";n.d(t,{z:function(){return c}});var r=n(7437),a=n(2265),i=n(5293),s=n(535),l=n(4508);let o=(0,s.j)("inline-flex items-center justify-center whitespace-nowrap font-mono text-sm font-medium transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-foreground text-background hover:bg-foreground/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border-2 border-border bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-foreground underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 px-3",lg:"h-11 px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=a.forwardRef((e,t)=>{let{className:n,variant:a,size:s,asChild:c=!1,...d}=e,u=c?i.g7:"button";return(0,r.jsx)(u,{className:(0,l.cn)(o({variant:a,size:s,className:n})),ref:t,...d})});c.displayName="Button"},6070:function(e,t,n){"use strict";n.d(t,{Ol:function(){return l},SZ:function(){return c},Zb:function(){return s},aY:function(){return d},ll:function(){return o}});var r=n(7437),a=n(2265),i=n(4508);let s=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("border-2 border-border bg-card text-card-foreground",n),...a})});s.displayName="Card";let l=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",n),...a})});l.displayName="CardHeader";let o=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)("h3",{ref:t,className:(0,i.cn)("font-mono text-2xl font-semibold leading-none tracking-tight",n),...a})});o.displayName="CardTitle";let c=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)("p",{ref:t,className:(0,i.cn)("font-mono text-sm text-muted-foreground",n),...a})});c.displayName="CardDescription";let d=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("p-6 pt-0",n),...a})});d.displayName="CardContent",a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("flex items-center p-6 pt-0",n),...a})}).displayName="CardFooter"},5832:function(e,t,n){"use strict";function r(){var e;return(null===(e=window.electronAPI)||void 0===e?void 0:e.isElectron)===!0}async function a(e,t){if(!r()||!window.electronAPI)return!1;try{let n=await t.arrayBuffer(),r=Array.from(new Uint8Array(n));return(await window.electronAPI.saveFile(e,r,t.name)).success}catch(e){return console.error("Error saving file to Electron:",e),!1}}async function i(e,t){if(!r()||!window.electronAPI)return null;try{let n=await window.electronAPI.loadFile(e,t);if(!n.success||!n.buffer)return null;let r=new Uint8Array(n.buffer),a=new Blob([r]);return new File([a],t,{type:"audio/mpeg"})}catch(e){return console.error("Error loading file from Electron:",e),null}}async function s(e,t){if(!r()||!window.electronAPI)return!1;try{return(await window.electronAPI.deleteFile(e,t)).success}catch(e){return console.error("Error deleting file from Electron:",e),!1}}async function l(){if(!r()||!window.electronAPI)return[];try{return(await window.electronAPI.loadMetadata()).files||[]}catch(e){return console.error("Error loading metadata from Electron:",e),[]}}async function o(e){if(!r()||!window.electronAPI)return!1;try{return(await window.electronAPI.saveMetadata(e)).success}catch(e){return console.error("Error saving metadata to Electron:",e),!1}}n.d(t,{LF:function(){return o},LV:function(){return a},QO:function(){return i},b4:function(){return l},d:function(){return r},mb:function(){return s}})},4508:function(e,t,n){"use strict";n.d(t,{cn:function(){return i}});var r=n(1994),a=n(3335);function i(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,a.m6)((0,r.W)(t))}},6362:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});let r=(0,n(9205).Z)("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]])},8930:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});let r=(0,n(9205).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},4369:function(e,t,n){"use strict";var r=n(2265),a="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},i=r.useState,s=r.useEffect,l=r.useLayoutEffect,o=r.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!a(e,n)}catch(e){return!0}}var d="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=i({inst:{value:n,getSnapshot:t}}),a=r[0].inst,d=r[1];return l(function(){a.value=n,a.getSnapshot=t,c(a)&&d({inst:a})},[e,n,t]),s(function(){return c(a)&&d({inst:a}),e(function(){c(a)&&d({inst:a})})},[e]),o(n),n};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:d},2860:function(e,t,n){"use strict";var r=n(2265),a=n(2558),i="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},s=a.useSyncExternalStore,l=r.useRef,o=r.useEffect,c=r.useMemo,d=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,a){var u=l(null);if(null===u.current){var f={hasValue:!1,value:null};u.current=f}else f=u.current;var m=s(e,(u=c(function(){function e(e){if(!o){if(o=!0,s=e,e=r(e),void 0!==a&&f.hasValue){var t=f.value;if(a(t,e))return l=t}return l=e}if(t=l,i(s,e))return t;var n=r(e);return void 0!==a&&a(t,n)?(s=e,t):(s=e,l=n)}var s,l,o=!1,c=void 0===n?null:n;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]},[t,n,r,a]))[0],u[1]);return o(function(){f.hasValue=!0,f.value=m},[m]),d(m),m}},2558:function(e,t,n){"use strict";e.exports=n(4369)},5195:function(e,t,n){"use strict";e.exports=n(2860)},9016:function(e,t,n){"use strict";n.d(t,{U:function(){return o}});var r=n(9625),a=n(5832);let i="the-stash-audio";async function s(){if((0,a.d)())try{let e=await (0,a.b4)();if(e&&e.length>0)return e.map(e=>({...e,uploadedAt:new Date(e.uploadedAt)}))}catch(e){console.error("Error loading from Electron storage:",e)}try{let e=localStorage.getItem(i);if(!e)return[];return JSON.parse(e).map(e=>({...e,uploadedAt:new Date(e.uploadedAt)}))}catch(e){return[]}}async function l(e){let t=e.map(e=>({id:e.id,name:e.name,key:e.key,bpm:e.bpm,tags:e.tags,uploadedAt:e.uploadedAt.toISOString()}));if((0,a.d)())try{await (0,a.LF)({files:t})}catch(e){console.error("Error saving to Electron storage:",e)}try{localStorage.setItem(i,JSON.stringify(t))}catch(e){}}let o=(0,r.Ue)((e,t)=>{let n=new Map;return{files:[],fileCache:n,hydrated:!1,hydrate:async()=>{if(t().hydrated)return;let r=await s();if(r.length>0){if((0,a.d)()){let t=[];for(let e of r)try{let r=await (0,a.QO)(e.id,e.name);r?(n.set(e.id,r),t.push({...e,file:r})):t.push({...e,file:e.name})}catch(n){console.error("Error loading file ".concat(e.id,":"),n),t.push({...e,file:e.name})}e({files:t,hydrated:!0})}else e({files:r.map(e=>({...e,file:e.name})),hydrated:!0})}else e({hydrated:!0})},addFile:async t=>{if(t.file instanceof File&&(0,a.d)())try{await (0,a.LV)(t.id,t.file),n.set(t.id,t.file)}catch(e){console.error("Error saving file to Electron:",e),n.set(t.id,t.file)}else t.file instanceof File&&n.set(t.id,t.file);e(e=>{let n=[...e.files,{...t,file:t.name}];return l(n),{files:n}})},updateFile:async(t,n)=>{e(e=>{let r=e.files.map(e=>e.id===t?{...e,...n}:e);return l(r),{files:r}})},deleteFile:async r=>{let i=t().files.find(e=>e.id===r);if(i&&(0,a.d)())try{await (0,a.mb)(i.id,i.name)}catch(e){console.error("Error deleting file from Electron:",e)}n.delete(r),e(e=>{let t=e.files.filter(e=>e.id!==r);return l(t),{files:t}})},filteredFiles:e=>{let{files:n}=t();return n.filter(t=>(!e.key||t.key===e.key)&&(!e.bpm||t.bpm===e.bpm)&&(!e.minBpm||!t.bpm||!(t.bpm<e.minBpm))&&(!e.maxBpm||!t.bpm||!(t.bpm>e.maxBpm)))},getFile:async e=>{let r=n.get(e);if(r)return r;if((0,a.d)()){let r=t().files.find(t=>t.id===e);if(r)try{let t=await (0,a.QO)(r.id,r.name);if(t)return n.set(e,t),t}catch(e){console.error("Error loading file from Electron:",e)}}return null}}})},9625:function(e,t,n){"use strict";n.d(t,{Ue:function(){return f}});let r=e=>{let t;let n=new Set,r=(e,r)=>{let a="function"==typeof e?e(t):e;if(!Object.is(a,t)){let e=t;t=(null!=r?r:"object"!=typeof a||null===a)?a:Object.assign({},t,a),n.forEach(n=>n(t,e))}},a=()=>t,i={setState:r,getState:a,getInitialState:()=>s,subscribe:e=>(n.add(e),()=>n.delete(e)),destroy:()=>{console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},s=t=e(r,a,i);return i},a=e=>e?r(e):r;var i=n(2265),s=n(5195);let{useDebugValue:l}=i,{useSyncExternalStoreWithSelector:o}=s,c=!1,d=e=>e,u=e=>{"function"!=typeof e&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");let t="function"==typeof e?a(e):e,n=(e,n)=>(function(e,t=d,n){n&&!c&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),c=!0);let r=o(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return l(r),r})(t,e,n);return Object.assign(n,t),n},f=e=>e?u(e):u}},function(e){e.O(0,[824,620,971,117,744],function(){return e(e.s=7601)}),_N_E=e.O()}]);