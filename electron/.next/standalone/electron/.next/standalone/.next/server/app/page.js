(()=>{var e={};e.id=931,e.ids=[931],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},9954:(e,s,a)=>{"use strict";a.r(s),a.d(s,{GlobalError:()=>r.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>d,routeModule:()=>u,tree:()=>c}),a(908),a(708),a(5866);var t=a(3191),l=a(8716),n=a(7922),r=a.n(n),i=a(5231),o={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);a.d(s,o);let c=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,908)),"/Users/alexjamesmcintyre/Projects/stash2/app/page.tsx"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,708)),"/Users/alexjamesmcintyre/Projects/stash2/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,5866,23)),"next/dist/client/components/not-found-error"]}],d=["/Users/alexjamesmcintyre/Projects/stash2/app/page.tsx"],m="/page",x={require:a,loadChunk:()=>Promise.resolve()},u=new t.AppPageRouteModule({definition:{kind:l.x.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},4435:(e,s,a)=>{Promise.resolve().then(a.bind(a,1320))},1320:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>P});var t=a(326),l=a(7577),n=a(58),r=a(1075),i=a(2643),o=a(7863);let c=l.forwardRef(({className:e,type:s,...a},l)=>t.jsx("input",{type:s,className:(0,o.cn)("flex h-10 w-full border-2 border-border bg-background px-3 py-2 font-mono text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:l,...a}));c.displayName="Input";let d=l.forwardRef(({className:e,children:s,...a},l)=>t.jsx("select",{className:(0,o.cn)("flex h-10 w-full border-2 border-border bg-background px-3 py-2 font-mono text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:l,...a,children:s}));d.displayName="Select";var m=a(772),x=a(2881);let u=(0,x.Z)("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]),p=(0,x.Z)("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);var h=a(8091),f=a(8129);let g=(0,x.Z)("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);var y=a(4019);let j=(0,x.Z)("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);function b({file:e,onClose:s}){let[a,o]=(0,l.useState)(!1),[c,d]=(0,l.useState)(0),[x,p]=(0,l.useState)(0),[h,b]=(0,l.useState)(""),[v,N]=(0,l.useState)({x:100,y:100}),[k,w]=(0,l.useState)(!1),[C,P]=(0,l.useState)({x:0,y:0}),S=(0,l.useRef)(null),z=(0,l.useRef)(null),M=(0,l.useRef)(null),{getFile:Z}=(0,r.U)(),_=e=>`${Math.floor(e/60)}:${Math.floor(e%60).toString().padStart(2,"0")}`;return t.jsx(f.M,{children:t.jsx(n.E.div,{ref:z,initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"fixed z-50 w-80",style:{left:`${v.x}px`,top:`${v.y}px`,cursor:k?"grabbing":"default"},children:(0,t.jsxs)(i.Zb,{className:"border-2 border-border shadow-lg select-none",children:[t.jsx(i.Ol,{ref:M,onMouseDown:e=>{if(!z.current)return;let s=z.current.getBoundingClientRect();P({x:e.clientX-s.left,y:e.clientY-s.top}),w(!0)},className:"cursor-grab active:cursor-grabbing border-b-2 border-border pb-2 select-none",children:(0,t.jsxs)("div",{className:"flex items-center justify-between select-none",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 flex-1 min-w-0 select-none",children:[t.jsx(g,{className:"h-4 w-4 text-muted-foreground shrink-0"}),t.jsx(i.ll,{className:"font-mono text-sm font-medium truncate lowercase select-none",children:e.name})]}),t.jsx(m.z,{size:"icon",variant:"ghost",onClick:s,className:"shrink-0 h-6 w-6",children:t.jsx(y.Z,{className:"h-3 w-3"})})]})}),(0,t.jsxs)(i.aY,{className:"p-4 select-none",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 select-none",children:[t.jsx(m.z,{size:"icon",onClick:()=>{let e=S.current;e&&(e.paused?e.play().then(()=>{o(!0)}).catch(e=>{console.error("Error playing audio:",e)}):(e.pause(),o(!1)))},className:"shrink-0",children:a?t.jsx(j,{className:"h-4 w-4"}):t.jsx(u,{className:"h-4 w-4"})}),t.jsx("div",{className:"flex-1 min-w-0 select-none",children:(0,t.jsxs)("div",{className:"flex items-center gap-2 select-none",children:[t.jsx("input",{type:"range",min:"0",max:x||0,value:c,onChange:e=>{let s=S.current;if(!s)return;let a=parseFloat(e.target.value);s.currentTime=a,d(a)},className:"flex-1 h-1 bg-secondary accent-foreground cursor-pointer"}),(0,t.jsxs)("span",{className:"font-mono text-xs text-muted-foreground whitespace-nowrap shrink-0 select-none",children:[_(c)," / ",_(x)]})]})})]}),h&&t.jsx("audio",{ref:S,src:h,preload:"metadata"})]})]})})})}var v=a(7027);let N=l.forwardRef(({className:e,...s},a)=>t.jsx("label",{ref:a,className:(0,o.cn)("font-mono text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",e),...s}));N.displayName="Label";let k=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];function w({file:e,onClose:s}){let{updateFile:a}=(0,r.U)(),[o,x]=(0,l.useState)(e.key||""),[u,p]=(0,l.useState)(e.bpm?.toString()||""),[h,g]=(0,l.useState)(e.tags.join(", ")),j=async()=>{await a(e.id,{key:o||void 0,bpm:u?parseInt(u):void 0,tags:h.split(",").map(e=>e.trim()).filter(Boolean)}),s()};return t.jsx(f.M,{children:t.jsx(n.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",onClick:s,children:t.jsx(n.E.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},onClick:e=>e.stopPropagation(),children:(0,t.jsxs)(i.Zb,{className:"w-full max-w-md",children:[t.jsx(i.Ol,{children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[t.jsx(i.ll,{className:"font-mono lowercase",children:"edit track"}),t.jsx(m.z,{size:"icon",variant:"ghost",onClick:s,children:t.jsx(y.Z,{className:"h-4 w-4"})})]})}),(0,t.jsxs)(i.aY,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(N,{className:"font-mono lowercase",children:"key"}),(0,t.jsxs)(d,{value:o,onChange:e=>x(e.target.value),children:[t.jsx("option",{value:"",children:"none"}),k.map(e=>t.jsx("option",{value:e,children:e},e))]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[t.jsx(N,{className:"font-mono lowercase",children:"bpm"}),(0,t.jsxs)("a",{href:"https://tunebat.com/Analyzer",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 font-mono text-xs text-muted-foreground hover:text-foreground transition-colors lowercase",children:["detect bpm",t.jsx(v.Z,{className:"h-3 w-3"})]})]}),t.jsx(c,{type:"number",placeholder:"bpm",value:u,onChange:e=>p(e.target.value)})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(N,{className:"font-mono lowercase",children:"tags (comma-separated)"}),t.jsx(c,{placeholder:"tag1, tag2, tag3",value:h,onChange:e=>g(e.target.value)})]}),(0,t.jsxs)("div",{className:"flex gap-2 pt-4",children:[t.jsx(m.z,{variant:"outline",onClick:s,className:"flex-1 font-mono lowercase",children:"cancel"}),t.jsx(m.z,{onClick:j,className:"flex-1 font-mono lowercase",children:"save"})]})]})]})})})})}let C=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];function P(){let{files:e,deleteFile:s,filteredFiles:a,hydrate:o}=(0,r.U)(),[x,f]=(0,l.useState)(""),[g,y]=(0,l.useState)(""),[j,v]=(0,l.useState)(""),[N,k]=(0,l.useState)(""),[P,S]=(0,l.useState)(null),[z,M]=(0,l.useState)(null),Z=(0,l.useMemo)(()=>a({key:x||void 0,bpm:g?parseInt(g):void 0,minBpm:j?parseInt(j):void 0,maxBpm:N?parseInt(N):void 0}),[x,g,j,N,a]);return(0,t.jsxs)("div",{className:"container mx-auto p-6 space-y-6",children:[(0,t.jsxs)(n.E.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.3},children:[t.jsx("h1",{className:"font-mono text-4xl font-bold mb-2 lowercase tracking-tight",children:"library"}),(0,t.jsxs)("p",{className:"font-mono text-muted-foreground lowercase",children:[Z.length," ",1===Z.length?"track":"tracks"]})]}),(0,t.jsxs)(n.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.1},className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx("label",{className:"font-mono text-sm font-medium lowercase",children:"filter by key"}),(0,t.jsxs)(d,{value:x,onChange:e=>f(e.target.value),children:[t.jsx("option",{value:"",children:"all keys"}),C.map(e=>t.jsx("option",{value:e,children:e},e))]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx("label",{className:"font-mono text-sm font-medium lowercase",children:"exact bpm"}),t.jsx(c,{type:"number",placeholder:"bpm",value:g,onChange:e=>y(e.target.value)})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx("label",{className:"font-mono text-sm font-medium lowercase",children:"min bpm"}),t.jsx(c,{type:"number",placeholder:"min",value:j,onChange:e=>v(e.target.value)})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx("label",{className:"font-mono text-sm font-medium lowercase",children:"max bpm"}),t.jsx(c,{type:"number",placeholder:"max",value:N,onChange:e=>k(e.target.value)})]})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:Z.map((e,a)=>t.jsx(n.E.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.2,delay:.05*a},whileHover:{y:-4},children:(0,t.jsxs)(i.Zb,{className:"h-full flex flex-col hover:border-foreground transition-colors",children:[(0,t.jsxs)(i.Ol,{children:[t.jsx(i.ll,{className:"font-mono text-lg truncate lowercase",children:e.name}),(0,t.jsxs)(i.SZ,{className:"font-mono lowercase",children:[e.key&&`key: ${e.key}`,e.key&&e.bpm&&" â€¢ ",e.bpm&&`bpm: ${e.bpm}`]})]}),(0,t.jsxs)(i.aY,{className:"flex-1 flex flex-col justify-between",children:[t.jsx("div",{className:"space-y-2",children:e.tags.length>0&&t.jsx("div",{className:"flex flex-wrap gap-1",children:e.tags.map(e=>t.jsx("span",{className:"font-mono text-xs border-2 border-border px-2 py-1 lowercase hover:bg-foreground hover:text-background transition-colors",children:e},e))})}),(0,t.jsxs)("div",{className:"flex gap-2 mt-4",children:[t.jsx(m.z,{size:"icon",variant:"outline",onClick:()=>S(e.id),className:"flex-1",children:t.jsx(u,{className:"h-4 w-4"})}),t.jsx(m.z,{size:"icon",variant:"outline",onClick:()=>M(e.id),children:t.jsx(p,{className:"h-4 w-4"})}),t.jsx(m.z,{size:"icon",variant:"outline",onClick:()=>s(e.id),children:t.jsx(h.Z,{className:"h-4 w-4"})})]})]})]})},e.id))}),0===Z.length&&t.jsx(n.E.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-12",children:t.jsx("p",{className:"font-mono text-muted-foreground lowercase",children:"no tracks found. upload some audio files to get started."})}),P&&t.jsx(b,{file:Z.find(e=>e.id===P),onClose:()=>S(null)}),z&&t.jsx(w,{file:Z.find(e=>e.id===z),onClose:()=>M(null)})]})}},7027:(e,s,a)=>{"use strict";a.d(s,{Z:()=>t});let t=(0,a(2881).Z)("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]])},8091:(e,s,a)=>{"use strict";a.d(s,{Z:()=>t});let t=(0,a(2881).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},908:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>t});let t=(0,a(8570).createProxy)(String.raw`/Users/alexjamesmcintyre/Projects/stash2/app/page.tsx#default`)}};var s=require("../webpack-runtime.js");s.C(e);var a=e=>s(s.s=e),t=s.X(0,[194,211,398],()=>a(9954));module.exports=t})();